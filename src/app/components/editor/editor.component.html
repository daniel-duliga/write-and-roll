<div class="container" [ngStyle]="{ 'display': minimized ? 'none' : 'flex' }">
    <!-- Header -->
    <div class="header">
        <!-- Title -->
        <div class="header-separator"></div>
        <div class="title" matTooltip="Minimize" (click)="toggleMinimize(true)">
            {{ this.formattedName }}
        </div>

        <!-- Save button -->
        <span class="buttons-container" *ngIf="this.isDirty">
            <div class="header-separator"></div>
            <button
                class="header-button"
                mat-button
                matTooltip="Save (CTRL + S)"
                [style]="isDirty ? { 'color': 'red' } : {}"
                (click)="this.save()"
            >
                <mat-icon>save</mat-icon>
            </button>
        </span>
        
        <!-- Move buttons -->
        <div class="header-separator"></div>
        <button class="header-button" mat-button matTooltip="Move left" (click)="move('left')">
            <mat-icon>chevron_left</mat-icon>
        </button>
        <button class="header-button" mat-button matTooltip="Move right" (click)="move('right')">
            <mat-icon>chevron_right</mat-icon>
        </button>
        
        <!-- Close button -->
        <div class="header-separator"></div>
        <button mat-button class="header-button" matTooltip="Close" (click)="this.closeEditor()">
            <mat-icon class="close-button-icon">close</mat-icon>
        </button>
    </div>
    
    <!-- Editor -->
    <div class="editor">
        <ngx-codemirror
            class="code-mirror"
            #ngxCodeMirror
            [(ngModel)]="this.entity.rawContent"
            [options]="{
                theme: 'default',
                mode: this.mode,
                lineWrapping: true,
                inputStyle: 'textarea'
            }"
        ></ngx-codemirror>
    </div>
    
    <!-- Commands -->
    <div class="commands">
        <app-commands #commands (onCommandExecuted)="this.handleCommand($event)"></app-commands>
    </div>
</div>

<!-- Minimized -->
<div 
    class="container-minimized"
    *ngIf="minimized"
    matTooltip="Maximize"
    matTooltipPosition="right"
    (click)="toggleMinimize(false)"
>
    <mat-icon class="maximize-button">keyboard_double_arrow_right</mat-icon>
    <div class="header-separator"></div>
    <div class="title-minimized">
        {{ this.formattedName }}
    </div>
</div>